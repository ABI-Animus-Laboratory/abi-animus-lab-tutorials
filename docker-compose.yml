services:
  abi-animus-lab-tutorials:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: abi-animus-lab-tutorials
    ports:
      - "8888:8888"
    volumes:
      # Mount current directory to persist notebook changes
      - .:/tutorials
      # X11 socket for GUI display (Linux/Mac with XQuartz)
      # This will be empty/ignored on Windows
      - /tmp/.X11-unix:/tmp/.X11-unix:rw
    environment:
      - JUPYTER_ENABLE_LAB=no
      # Pass host DISPLAY for Linux, container script will auto-detect for Windows/Mac
      - DISPLAY=${DISPLAY:-}
      - VTK_INCLUDE_DIRS=/opt/vita/vita_build/include/vtk-8.1
      - VITA_INCLUDE_DIRS=/opt/vita/include/vita_source
      - VTK_LIBRARY_DIRS=/opt/vita/vita_build/lib
      - VITA_LIBRARY_DIRS=/opt/vita/lib
    restart: unless-stopped
